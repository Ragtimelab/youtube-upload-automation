#!/usr/bin/env bash
# Streamlit ëŒ€ì‹œë³´ë“œ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸

echo "ğŸ¬ YouTube ì—…ë¡œë“œ ìë™í™” - Streamlit ëŒ€ì‹œë³´ë“œ ì‹œì‘"
echo "ğŸŒ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8501 ë¡œ ì ‘ì†í•˜ì„¸ìš”"
echo "âš ï¸  ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ì„¸ìš” (http://localhost:8000)"
echo "=============================================="

cd "$(dirname "$0")"

# í•„ìš”í•œ Python íŒ¨í‚¤ì§€ í™•ì¸
echo "ğŸ“¦ íŒ¨í‚¤ì§€ í™•ì¸ ì¤‘..."
poetry run python -c "import streamlit, pandas, plotly" 2>/dev/null

if [ $? -ne 0 ]; then
    echo "âŒ í•„ìš”í•œ íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
    echo "ğŸ’¡ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”:"
    echo "   poetry install"
    exit 1
fi

echo "âœ… íŒ¨í‚¤ì§€ í™•ì¸ ì™„ë£Œ"

# Streamlit ì•± ì‹¤í–‰
echo "ğŸš€ Streamlit ëŒ€ì‹œë³´ë“œ ì‹œì‘..."
poetry run python streamlit_app.py