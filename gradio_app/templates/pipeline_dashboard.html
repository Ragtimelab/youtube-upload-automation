<div style="padding: 20px; border-radius: 12px; background: #f0f9ff; border: 2px solid #0ea5e9; margin: 10px 0;">
    <h3 style="margin: 0 0 15px 0; color: #0369a1;">🔄 파이프라인 상태 대시보드</h3>
    
    {% if total == 0 %}
    <div style="text-align: center; padding: 20px; color: #78350f;">
        📋 등록된 스크립트가 없습니다.
        <br><br>
        <strong>스크립트를 먼저 업로드해주세요.</strong>
    </div>
    {% else %}
    
    <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
            <div>
                <strong style="color: #1f2937;">전체 스크립트:</strong>
                <div style="margin-top: 4px; color: #6b7280; font-size: 18px; font-weight: bold;">{{ total }}개</div>
            </div>
            <div>
                <strong style="color: #1f2937;">업로드 완료:</strong>
                <div style="margin-top: 4px; color: #22c55e; font-size: 18px; font-weight: bold;">{{ completed }}개</div>
            </div>
        </div>
        
        <div>
            <strong style="color: #1f2937;">전체 진행률: {{ "%.1f"|format(progress_percentage) }}%</strong>
            <div style="margin-top: 8px; background: #e5e7eb; border-radius: 8px; overflow: hidden;">
                <div style="height: 20px; background: linear-gradient(90deg, #3b82f6 0%, #22c55e 100%); width: {{ progress_percentage }}%; transition: width 0.3s ease; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 12px;">
                    {{ completed }}/{{ total }}
                </div>
            </div>
        </div>
    </div>
    
    <div style="background: white; border-radius: 8px; overflow: hidden; border: 1px solid #d1d5db; margin-bottom: 15px;">
        <h4 style="margin: 0; padding: 12px 16px; background: #f9fafb; border-bottom: 2px solid #e5e7eb; color: #374151;">상태별 스크립트 분포</h4>
        <table style="width: 100%; border-collapse: collapse;">
            <thead style="background: #f3f4f6;">
                <tr>
                    <th style="padding: 12px 8px; text-align: left; font-weight: bold; color: #374151; border-bottom: 1px solid #e5e7eb;">상태</th>
                    <th style="padding: 12px 8px; text-align: right; font-weight: bold; color: #374151; border-bottom: 1px solid #e5e7eb;">개수</th>
                    <th style="padding: 12px 8px; text-align: left; font-weight: bold; color: #374151; border-bottom: 1px solid #e5e7eb;">스크립트 ID</th>
                </tr>
            </thead>
            <tbody>
                {% for status_data in status_rows %}
                <tr style="border-bottom: 1px solid #e5e7eb;">
                    <td style="padding: 12px 8px; font-weight: bold;"><span style="color: {{ status_data.color }};">{{ status_data.icon }} {{ status_data.status }}</span></td>
                    <td style="padding: 12px 8px; text-align: right; font-weight: bold; color: #1f2937;">{{ status_data.count }}</td>
                    <td style="padding: 12px 8px; color: #6b7280; font-size: 12px;">{{ status_data.script_ids }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    {% if recommendations %}
    <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border: 1px solid #22c55e;">
        <h4 style="margin: 0 0 10px 0; color: #166534;">💡 추천 액션</h4>
        <ul style="margin: 10px 0; padding-left: 20px;">
            {% for rec in recommendations %}
            <li style="margin-bottom: 8px; color: #374151;">{{ rec | safe }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    <div style="margin-top: 15px; padding: 12px; background: #dbeafe; border: 1px solid #3b82f6; border-radius: 6px;">
        <strong style="color: #1e40af;">💫 팁:</strong>
        <span style="color: #1e3a8a;"> 파이프라인의 병목 구간을 해결하여 전체 효율성을 향상시킬 수 있습니다.</span>
    </div>
    
    {% endif %}
</div>